<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DOBI MIJAN</title>
<style>
  body { font-family: sans-serif; background: linear-gradient(to bottom, #cfd9df, #e2ebf0); margin:0; padding:0; }
  .container { max-width: 400px; margin: auto; padding: 20px; }
  h1 { text-align:center; }
  .machine { padding:15px; margin:10px 0; border-radius:10px; color:white; cursor:pointer; text-align:center; }
  .available { background: #4CAF50; }
  .busy { background: #FF9800; }
</style>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-database-compat.js"></script>
</head>
<body>
<div class="container">
  <h1>DOBI MIJAN</h1>
  <div id="machine1" class="machine available">MESIN 1 - AVAILABLE</div>
  <div id="machine2" class="machine available">MESIN 2 - AVAILABLE</div>
</div>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBPaObgmHZBQR8-0aX3pTUOFeMOxIsn0Lc",
  authDomain: "smart-dobi-system-fyp.firebaseapp.com",
  databaseURL: "https://smart-dobi-system-fyp-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "smart-dobi-system-fyp",
  storageBucket: "smart-dobi-system-fyp.firebasestorage.app",
  messagingSenderId: "377544234994",
  appId: "1:377544234994:web:690cd32c142e7ee501fd6b"
};

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const machines = ["relay1", "relay2"];

  // Update UI based on Firebase
  machines.forEach((machine, i) => {
    const el = document.getElementById(`machine${i+1}`);
    const ref = db.ref(machine);
    ref.on("value", (snapshot) => {
      const status = snapshot.val();
      if(status){
        el.className = "machine busy";
        el.textContent = `MESIN ${i+1} - RUNNING`;
      } else {
        el.className = "machine available";
        el.textContent = `MESIN ${i+1} - AVAILABLE`;
      }
    });

    // Click to toggle relay
    el.onclick = () => {
      ref.set(!el.classList.contains("busy"));
    };
  });
</script>
</body>
</html>
